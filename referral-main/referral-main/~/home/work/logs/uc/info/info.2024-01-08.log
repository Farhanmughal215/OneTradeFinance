20:19:12.552 - com.xstocks.uc.UCApplication - Starting UCApplication using Java 1.8.0_172 on MacOS with PID 9752 (E:\DEV\ideaProject\uc\target\classes started by Administrator in E:\DEV\ideaProject\uc)
20:19:12.550 - o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.5.Final
20:19:12.554 - com.xstocks.uc.UCApplication - No active profile set, falling back to 1 default profile: "default"
20:19:14.173 - o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
20:19:14.175 - o.a.catalina.core.StandardService - Starting service [Tomcat]
20:19:14.175 - o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.69]
20:19:14.293 - o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
20:19:14.389 - o.a.catalina.core.StandardService - Stopping service [Tomcat]
20:20:01.956 - com.xstocks.uc.UCApplication - Starting UCApplication using Java 1.8.0_172 on MacOS with PID 4556 (E:\DEV\ideaProject\uc\target\classes started by Administrator in E:\DEV\ideaProject\uc)
20:20:01.956 - o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.5.Final
20:20:01.958 - com.xstocks.uc.UCApplication - No active profile set, falling back to 1 default profile: "default"
20:20:03.802 - o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
20:20:03.804 - o.a.catalina.core.StandardService - Starting service [Tomcat]
20:20:03.804 - o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.69]
20:20:03.932 - o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
20:20:04.060 - o.a.catalina.core.StandardService - Stopping service [Tomcat]
20:20:56.369 - com.xstocks.uc.UCApplication - Starting UCApplication using Java 1.8.0_172 on MacOS with PID 13180 (E:\DEV\ideaProject\uc\target\classes started by Administrator in E:\DEV\ideaProject\uc)
20:20:56.369 - o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.5.Final
20:20:56.371 - com.xstocks.uc.UCApplication - The following 1 profile is active: "debug"
20:20:58.265 - o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-7878"]
20:20:58.265 - o.a.catalina.core.StandardService - Starting service [Tomcat]
20:20:58.265 - o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.69]
20:20:58.391 - o.a.c.c.C.[.[.[/xstock_api_test] - Initializing Spring embedded WebApplicationContext
20:20:59.448 - org.redisson.Version - Redisson 3.24.3
20:21:00.243 - o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for r-bp1fck3fhp2n1hwjcfpd.redis.rds.aliyuncs.com/47.111.52.12:6379
20:21:01.571 - o.r.c.pool.MasterConnectionPool - 24 connections initialized for r-bp1fck3fhp2n1hwjcfpd.redis.rds.aliyuncs.com/47.111.52.12:6379
20:21:01.740 - com.zaxxer.hikari.HikariDataSource - startHikariCPPool - Starting...
20:21:02.462 - com.zaxxer.hikari.HikariDataSource - startHikariCPPool - Start completed.
20:21:03.395 - c.xstocks.uc.config.LuaScriptConfig - scriptLoad success local rate = redis.call('HGET', KEYS[1], KEYS[3]);
local rate_ms = redis.call('HGET', KEYS[1], KEYS[4]);

local interval_ms = 20;
if (rate_ms)
then
    if (tonumber(rate_ms) > 0) then
        rate_ms = tonumber(rate_ms)
    end
else
    rate_ms = 1000
end
if (rate)
then
    if (tonumber(rate) > 0)
    then
        interval_ms = rate_ms / tonumber(rate)
    end
end

local wait_ms = 0;
local val = redis.call('HGET', KEYS[1], KEYS[2]);
if (val)
then
    val = tonumber(val)
    local diff = tonumber(ARGV[1]) - tonumber(interval_ms);
    if (diff < val) then
        wait_ms = val - diff
    else
        redis.call('HSET', KEYS[1], KEYS[2], ARGV[1]);
    end
else
    redis.call('HSET', KEYS[1], KEYS[2], ARGV[1]);
end

return wait_ms;
20:21:05.863 - o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-7878"]
20:21:05.979 - com.xstocks.uc.UCApplication - Started UCApplication in 10.147 seconds (JVM running for 11.208)
20:21:06.575 - o.a.c.c.C.[.[.[/xstock_api_test] - Initializing Spring DispatcherServlet 'dispatcherServlet'
20:41:56.704 - com.xstocks.uc.UCApplication - Starting UCApplication using Java 1.8.0_172 on MacOS with PID 7748 (E:\DEV\ideaProject\uc\target\classes started by Administrator in E:\DEV\ideaProject\uc)
20:41:56.704 - o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.5.Final
20:41:56.706 - com.xstocks.uc.UCApplication - The following 1 profile is active: "debug"
20:41:58.750 - o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-7878"]
20:41:58.750 - o.a.catalina.core.StandardService - Starting service [Tomcat]
20:41:58.750 - o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.69]
20:41:58.885 - o.a.c.c.C.[.[.[/xstock_api_test] - Initializing Spring embedded WebApplicationContext
20:42:00.188 - org.redisson.Version - Redisson 3.24.3
20:42:01.032 - o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for r-bp1fck3fhp2n1hwjcfpd.redis.rds.aliyuncs.com/47.111.52.12:6379
20:42:02.316 - o.r.c.pool.MasterConnectionPool - 24 connections initialized for r-bp1fck3fhp2n1hwjcfpd.redis.rds.aliyuncs.com/47.111.52.12:6379
20:42:02.487 - com.zaxxer.hikari.HikariDataSource - startHikariCPPool - Starting...
20:42:03.179 - com.zaxxer.hikari.HikariDataSource - startHikariCPPool - Start completed.
20:42:04.198 - c.xstocks.uc.config.LuaScriptConfig - scriptLoad success local rate = redis.call('HGET', KEYS[1], KEYS[3]);
local rate_ms = redis.call('HGET', KEYS[1], KEYS[4]);

local interval_ms = 20;
if (rate_ms)
then
    if (tonumber(rate_ms) > 0) then
        rate_ms = tonumber(rate_ms)
    end
else
    rate_ms = 1000
end
if (rate)
then
    if (tonumber(rate) > 0)
    then
        interval_ms = rate_ms / tonumber(rate)
    end
end

local wait_ms = 0;
local val = redis.call('HGET', KEYS[1], KEYS[2]);
if (val)
then
    val = tonumber(val)
    local diff = tonumber(ARGV[1]) - tonumber(interval_ms);
    if (diff < val) then
        wait_ms = val - diff
    else
        redis.call('HSET', KEYS[1], KEYS[2], ARGV[1]);
    end
else
    redis.call('HSET', KEYS[1], KEYS[2], ARGV[1]);
end

return wait_ms;
20:42:06.708 - o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-7878"]
20:42:06.820 - com.xstocks.uc.UCApplication - Started UCApplication in 10.821 seconds (JVM running for 12.66)
20:42:06.898 - o.a.c.c.C.[.[.[/xstock_api_test] - Initializing Spring DispatcherServlet 'dispatcherServlet'
20:43:56.404 - com.zaxxer.hikari.HikariDataSource - startHikariCPPool - Shutdown initiated...
20:43:56.416 - com.zaxxer.hikari.HikariDataSource - startHikariCPPool - Shutdown completed.
20:44:01.019 - com.xstocks.uc.UCApplication - Starting UCApplication using Java 1.8.0_172 on MacOS with PID 14144 (E:\DEV\ideaProject\uc\target\classes started by Administrator in E:\DEV\ideaProject\uc)
20:44:01.019 - o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.5.Final
20:44:01.021 - com.xstocks.uc.UCApplication - The following 1 profile is active: "debug"
20:44:02.826 - o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-7878"]
20:44:02.828 - o.a.catalina.core.StandardService - Starting service [Tomcat]
20:44:02.828 - o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.69]
20:44:02.944 - o.a.c.c.C.[.[.[/xstock_api_test] - Initializing Spring embedded WebApplicationContext
20:44:04.099 - org.redisson.Version - Redisson 3.24.3
20:44:04.807 - o.r.c.p.MasterPubSubConnectionPool - 1 connections initialized for r-bp1fck3fhp2n1hwjcfpd.redis.rds.aliyuncs.com/47.111.52.12:6379
20:44:06.092 - o.r.c.pool.MasterConnectionPool - 24 connections initialized for r-bp1fck3fhp2n1hwjcfpd.redis.rds.aliyuncs.com/47.111.52.12:6379
20:44:06.235 - com.zaxxer.hikari.HikariDataSource - startHikariCPPool - Starting...
20:44:06.998 - com.zaxxer.hikari.HikariDataSource - startHikariCPPool - Start completed.
20:44:07.859 - c.xstocks.uc.config.LuaScriptConfig - scriptLoad success local rate = redis.call('HGET', KEYS[1], KEYS[3]);
local rate_ms = redis.call('HGET', KEYS[1], KEYS[4]);

local interval_ms = 20;
if (rate_ms)
then
    if (tonumber(rate_ms) > 0) then
        rate_ms = tonumber(rate_ms)
    end
else
    rate_ms = 1000
end
if (rate)
then
    if (tonumber(rate) > 0)
    then
        interval_ms = rate_ms / tonumber(rate)
    end
end

local wait_ms = 0;
local val = redis.call('HGET', KEYS[1], KEYS[2]);
if (val)
then
    val = tonumber(val)
    local diff = tonumber(ARGV[1]) - tonumber(interval_ms);
    if (diff < val) then
        wait_ms = val - diff
    else
        redis.call('HSET', KEYS[1], KEYS[2], ARGV[1]);
    end
else
    redis.call('HSET', KEYS[1], KEYS[2], ARGV[1]);
end

return wait_ms;
20:44:10.043 - o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-7878"]
20:44:10.157 - com.xstocks.uc.UCApplication - Started UCApplication in 9.674 seconds (JVM running for 10.469)
20:44:12.087 - o.a.c.c.C.[.[.[/xstock_api_test] - Initializing Spring DispatcherServlet 'dispatcherServlet'
20:44:12.149 - c.x.u.s.remote.PolygoWsService - polygo subsrcibe started
